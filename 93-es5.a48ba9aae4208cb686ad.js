function _createForOfIteratorHelper(l){if("undefined"==typeof Symbol||null==l[Symbol.iterator]){if(Array.isArray(l)||(l=_unsupportedIterableToArray(l))){var n=0,e=function(){};return{s:e,n:function(){return n>=l.length?{done:!0}:{done:!1,value:l[n++]}},e:function(l){throw l},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,u,i=!0,r=!1;return{s:function(){t=l[Symbol.iterator]()},n:function(){var l=t.next();return i=l.done,l},e:function(l){r=!0,u=l},f:function(){try{i||null==t.return||t.return()}finally{if(r)throw u}}}}function _unsupportedIterableToArray(l,n){if(l){if("string"==typeof l)return _arrayLikeToArray(l,n);var e=Object.prototype.toString.call(l).slice(8,-1);return"Object"===e&&l.constructor&&(e=l.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(l,n):void 0}}function _arrayLikeToArray(l,n){(null==n||n>l.length)&&(n=l.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=l[e];return t}function _defineProperties(l,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function _createClass(l,n,e){return n&&_defineProperties(l.prototype,n),e&&_defineProperties(l,e),l}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{L6id:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J"),u=function l(){_classCallCheck(this,l)},i=e("pMnS"),r=e("MKJQ"),o=e("sZkV"),a=function(){function l(){_classCallCheck(this,l)}return _createClass(l,[{key:"transform",value:function(l){switch(l){case"Free":return"secondary";case"Using":return"success";case"Reserved":return"tertiary";case"Dirty":return"warning";case"Unavailable":return"danger"}}}]),l}(),s=function(){function l(){_classCallCheck(this,l)}return _createClass(l,[{key:"transform",value:function(l,n){switch(l){case"Free":switch(n){case 0:return"Disable";case 1:return"Reserve";case 2:return"Open";default:return""}case"Using":switch(n){case 0:return"Confirm";case 1:return"Transfer";case 2:return"Close";default:return""}case"Reserved":switch(n){case 0:return"Confirm";case 1:return"Free";case 2:return"Open";default:return""}case"Dirty":switch(n){case 0:return"Disable";case 1:return"Free";default:return""}case"Unavailable":switch(n){case 1:return"Free";default:return""}}}}]),l}(),c=e("SVse"),b=e("mrSG"),h=function(){var l=function l(){_classCallCheck(this,l),this.occupied=0,this.status=l.Status.Unavailable};return l.Status={Free:"Free",Using:"Using",Reserved:"Reserved",Dirty:"Dirty",Unavailable:"Unavailable"},l}(),d=function(){function l(){var n=this;_classCallCheck(this,l),this.selectedTableChange=new t.m,this.fetchTableList=function(){return b.a(n,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table");case 2:return n=l.sent,l.next=5,n.json();case 5:this.tableList=l.sent,this.selectedTable&&(this.selectedTable=this.tableList.find((function(l){return l.name==e.selectedTable.name})));case 7:case"end":return l.stop()}}),l,this)})))}}return _createClass(l,[{key:"ngOnInit",value:function(){this.fetchTableList()}},{key:"ionViewDidEnter",value:function(){this.fetchTableList()}},{key:"selectTable",value:function(l){this.selectedTable=l}},{key:"selectedTable",get:function(){return this._selectedTable},set:function(l){this._selectedTable=l,this.selectedTableChange.emit(l)}}]),l}(),m=t.mb({encapsulation:0,styles:[["ion-col[_ngcontent-%COMP%]{height:100px}ion-button[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function f(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,5,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(1,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(2,0,null,0,3,"ion-button",[["class","large-button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.selectTable(l.context.$implicit)&&t),t}),r.C,r.c)),t.nb(3,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],fill:[1,"fill"]},null),t.Cb(4,1),(l()(),t.Gb(5,0,["",""]))],(function(l,n){var e=n.component;l(n,1,0,"4");var u=t.Hb(n,3,0,l(n,4,0,t.Ab(n.parent,0),n.context.$implicit.status));l(n,3,0,u,e.selectedTable===n.context.$implicit?"outline":"solid")}),(function(l,n){l(n,5,0,n.context.$implicit.name)}))}function g(l){return t.Ib(0,[t.Bb(0,a,[]),(l()(),t.ob(1,0,null,null,5,"ion-grid",[],null,null,null,r.M,r.m)),t.nb(2,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(3,0,null,0,3,"ion-row",[],null,null,null,r.U,r.u)),t.nb(4,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.db(16777216,null,0,1,null,f)),t.nb(6,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,6,0,n.component.tableList)}),null)}var p=e("s7LF"),k=function(){function l(n){_classCallCheck(this,l),this.alertController=n}return _createClass(l,[{key:"ngOnInit",value:function(){this.startTableTimer()}},{key:"operate",value:function(l,n){switch(+l){case 0:this.operate0(+n);break;case 1:this.operate1(+n);break;case 2:this.operate2(+n)}}},{key:"startTableTimer",value:function(){var l=this;this.tableTimer&&clearInterval(this.tableTimer),this.tableTimer=setInterval((function(){if(l.selectedTable&&l.selectedTable.startTime){var n=new Date(l.selectedTable.startTime),e=(new Date).getTime()-n.getTime(),t=new Date(e),u=Math.floor(e/1e3/60/1440);l.tableDuration=u+"d"+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)}else l.tableDuration=""}),1e3)}},{key:"operate0",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=this.selectedTable.status,n.next="Free"===n.t0?3:"Dirty"===n.t0?3:"Using"===n.t0?6:"Reserved"===n.t0?6:8;break;case 3:return n.next=5,this.disable();case 5:return n.abrupt("break",8);case 6:return n.next=8,this.modify(l);case 8:this.tableListRefreshHandler();case 9:case"end":return n.stop()}}),n,this)})))}},{key:"operate1",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=this.selectedTable.status,n.next="Free"===n.t0?3:"Using"===n.t0?6:"Reserved"===n.t0?9:"Dirty"===n.t0?9:"Unavailable"===n.t0?9:11;break;case 3:return n.next=5,this.reserve(l);case 5:return n.abrupt("break",11);case 6:return n.next=8,this.transfer();case 8:return n.abrupt("break",11);case 9:return n.next=11,this.free();case 11:this.tableListRefreshHandler();case 12:case"end":return n.stop()}}),n,this)})))}},{key:"operate2",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=this.selectedTable.status,n.next="Free"===n.t0?3:"Reserved"===n.t0?3:"Using"===n.t0?6:8;break;case 3:return n.next=5,this.open(l);case 5:return n.abrupt("break",8);case 6:return n.next=8,this.close();case 8:this.tableListRefreshHandler();case 9:case"end":return n.stop()}}),n,this)})))}},{key:"open",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/open?id="+this.selectedTable.id+"&occupied="+(+l?l:1),{method:"PUT"});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"reserve",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/reserve?id="+this.selectedTable.id+"&occupied="+l,{method:"PUT"});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"disable",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/disable?id="+this.selectedTable.id,{method:"PUT"});case 2:case"end":return l.stop()}}),l,this)})))}},{key:"free",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/free?id="+this.selectedTable.id,{method:"PUT"});case 2:case"end":return l.stop()}}),l,this)})))}},{key:"transfer",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t,u,i,r,o,a=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table?status=Free");case 2:return n=l.sent,l.next=5,n.json();case 5:if(!(e=l.sent)){l.next=15;break}t=[],u=_createForOfIteratorHelper(e);try{for(u.s();!(i=u.n()).done;)r=i.value,t.push({name:r.name,type:"radio",label:r.name,value:r.id})}catch(s){u.e(s)}finally{u.f()}return l.next=12,this.alertController.create({header:"Transfer to:",inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Confirm",handler:function(l){return b.a(a,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("transfer: "+this.selectedTable.id+"to: "+l),n.next=3,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/transfer?id="+this.selectedTable.id+"&transferId="+l,{method:"PUT"});case 3:this.tableListRefreshHandler();case 4:case"end":return n.stop()}}),n,this)})))}}]});case 12:return o=l.sent,l.next=15,o.present();case 15:case"end":return l.stop()}}),l,this)})))}},{key:"modify",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/modify-occupied?id="+this.selectedTable.id+"&occupied="+l,{method:"PUT"});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"close",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.alertController.create({header:"Close "+this.selectedTable.name,message:"Are you sure to close "+this.selectedTable.name+"?",buttons:["Cancel",{text:"Confirm",handler:function(){return b.a(e,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/close?id="+this.selectedTable.id,{method:"PUT"});case 2:this.tableListRefreshHandler();case 3:case"end":return l.stop()}}),l,this)})))}}]});case 2:return n=l.sent,l.next=5,n.present();case 5:case"end":return l.stop()}}),l,this)})))}}]),l}(),v=t.mb({encapsulation:0,styles:[[""]],data:{}});function x(l){return t.Ib(0,[t.Bb(0,a,[]),t.Bb(0,s,[]),(l()(),t.ob(2,0,null,null,13,"ion-card-header",[],null,null,null,r.F,r.g)),t.nb(3,49152,null,0,o.o,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,11,"ion-card-title",[],null,null,null,r.H,r.i)),t.nb(5,49152,null,0,o.q,[t.h,t.k,t.x],null,null),(l()(),t.ob(6,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(7,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(8,0,["",""])),(l()(),t.ob(9,0,null,0,2,"ion-label",[["color","secondary"],["style","margin-left: 0.8em; font-size: 1em;"]],null,null,null,r.S,r.s)),t.nb(10,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(11,0,["",""])),(l()(),t.ob(12,0,null,0,3,"ion-label",[["style","float: right; font-size: 1.2em;"]],null,null,null,r.S,r.s)),t.nb(13,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),t.Cb(14,1),(l()(),t.Gb(15,0,["",""])),(l()(),t.ob(16,0,null,null,35,"ion-card-content",[["style","height: calc(100% - 56px);"]],null,null,null,r.E,r.f)),t.nb(17,49152,null,0,o.n,[t.h,t.k,t.x],null,null),(l()(),t.ob(18,0,null,0,33,"ion-row",[["style","height: 100%"]],null,null,null,r.U,r.u)),t.nb(19,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(20,0,null,0,13,"ion-col",[["size","12"]],null,null,null,r.K,r.k)),t.nb(21,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(22,0,null,0,11,"ion-item",[],null,null,null,r.R,r.r)),t.nb(23,49152,null,0,o.H,[t.h,t.k,t.x],{disabled:[0,"disabled"]},null),(l()(),t.ob(24,0,null,0,2,"ion-label",[["position","fixed"]],null,null,null,r.S,r.s)),t.nb(25,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Customers"])),(l()(),t.ob(27,0,null,0,3,"ion-input",[["type","number"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0;return"ionBlur"===n&&(u=!1!==t.Ab(l,30)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,30)._handleIonChange(e.target)&&u),u}),r.Q,r.q)),t.Db(5120,null,p.b,(function(l){return[l]}),[o.Gb]),t.nb(29,49152,[["occupiedInput",4]],0,o.G,[t.h,t.k,t.x],{type:[0,"type"],value:[1,"value"]},null),t.nb(30,16384,null,0,o.Gb,[t.k],null,null),(l()(),t.ob(31,0,null,0,2,"ion-label",[["slot","end"]],null,null,null,r.S,r.s)),t.nb(32,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(33,0,["of ",""])),(l()(),t.ob(34,0,null,0,5,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(35,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(36,0,null,0,3,"ion-button",[["class","large-button"],["color","light"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.operate(0,t.Ab(l,29).value)&&u),u}),r.C,r.c)),t.nb(37,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(38,0,[" ",""])),t.Cb(39,2),(l()(),t.ob(40,0,null,0,5,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(41,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(42,0,null,0,3,"ion-button",[["class","large-button"],["color","light"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.operate(1,t.Ab(l,29).value)&&u),u}),r.C,r.c)),t.nb(43,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(44,0,[" ",""])),t.Cb(45,2),(l()(),t.ob(46,0,null,0,5,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(47,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(48,0,null,0,3,"ion-button",[["class","large-button"],["color","light"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.operate(2,t.Ab(l,29).value)&&u),u}),r.C,r.c)),t.nb(49,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(50,0,[" ",""])),t.Cb(51,2)],(function(l,n){var e=n.component;l(n,10,0,"secondary");var u=t.Hb(n,13,0,l(n,14,0,t.Ab(n,0),e.selectedTable?e.selectedTable.status:""));l(n,13,0,u),l(n,21,0,"12"),l(n,23,0,!e.selectedTable||"Free"!==e.selectedTable.status&&"Using"!==e.selectedTable.status&&"Reserved"!==e.selectedTable.status),l(n,25,0,"fixed"),l(n,29,0,"number",e.selectedTable?e.selectedTable.occupied:1),l(n,35,0,"4"),l(n,37,0,"light"),l(n,41,0,"4"),l(n,43,0,"light"),l(n,47,0,"4"),l(n,49,0,"light")}),(function(l,n){var e=n.component;l(n,8,0,e.selectedTable?e.selectedTable.name:"No Selected Table"),l(n,11,0,e.tableDuration),l(n,15,0,e.selectedTable?e.selectedTable.status:""),l(n,33,0,e.selectedTable?e.selectedTable.capacity:0);var u=t.Hb(n,38,0,l(n,39,0,t.Ab(n,1),e.selectedTable?e.selectedTable.status:"",0));l(n,38,0,u);var i=t.Hb(n,44,0,l(n,45,0,t.Ab(n,1),e.selectedTable?e.selectedTable.status:"",1));l(n,44,0,i);var r=t.Hb(n,50,0,l(n,51,0,t.Ab(n,1),e.selectedTable?e.selectedTable.status:"",2));l(n,50,0,r)}))}var y=function(){function l(n,e){_classCallCheck(this,l),this.billItem=n,this.menuItem=e,this.isSelected=!1}return _createClass(l,[{key:"itemName",get:function(){return this.menuItem.name}},{key:"unitPrice",get:function(){return this.menuItem.unitPrice}},{key:"quantity",get:function(){return this.billItem.quantity}},{key:"totalPrice",get:function(){return(this.menuItem.unitPrice*this.billItem.quantity).toFixed(2)}}]),l}(),C=function(){var l=function l(){_classCallCheck(this,l),this.status=l.Status.Open,this.discountAmount=0,this.discountPercentage=0};return l.Status={Open:"Open",Closed:"Closed"},l}(),I=function(){function l(){var n=this;_classCallCheck(this,l),this.displayedBillItemList=[],this.refreshBillItems=function(){return b.a(n,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.selectedTable){l.next=12;break}return l.next=3,this.fetchBill(this.selectedTable.id);case 3:if(!(n=l.sent)){l.next=12;break}return l.next=7,this.fetchMenuItemList();case 7:return e=l.sent,l.next=10,this.fetchBillItemList(n.id,"False");case 10:return t=l.sent,l.abrupt("return",(this.displayedBillItemList=this.generateDisplayList(t,e),void this.refreshBillSummaryHandler(this.displayedBillItemList)));case 12:this.displayedBillItemList=[];case 13:case"end":return l.stop()}}),l,this)})))}}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"checkBoxValueChangeHandler",value:function(){var l=this.displayedBillItemList.filter((function(l){return l.isSelected}));this.refreshBillSummaryHandler(l.length>0?l:this.displayedBillItemList)}},{key:"selectedTableChangedHandler",value:function(){this.refreshBillItems()}},{key:"fetchMenuItemList",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/menu/item");case 2:return n=l.sent,l.next=5,n.json();case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}}),l)})))}},{key:"fetchBill",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill?tableId="+l+"&status="+C.Status.Open);case 2:return e=n.sent,n.next=5,e.json();case 5:return n.abrupt("return",n.sent[0]);case 6:case"end":return n.stop()}}),n)})))}},{key:"fetchBillItemList",value:function(l,n){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item?billId="+l+"&hasPaid="+n);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))}},{key:"generateDisplayList",value:function(l,n){var e,t=[],u=_createForOfIteratorHelper(l);try{var i=function(){var l=e.value,u=n.find((function(n){return n.id===l.menuItemId}));t.push(new y(l,u))};for(u.s();!(e=u.n()).done;)i()}catch(r){u.e(r)}finally{u.f()}return t}},{key:"selectedTable",get:function(){return this._selectedTable},set:function(l){this._selectedTable=l,this.selectedTableChangedHandler()}}]),l}(),T=t.mb({encapsulation:0,styles:[["ion-list[_ngcontent-%COMP%]{min-height:100%}"]],data:{}});function B(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,30,"ion-item",[],null,null,null,r.R,r.r)),t.nb(1,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,6,"ion-checkbox",[["slot","start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Ab(l,3)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,3)._handleIonChange(e.target)&&u),"ngModelChange"===n&&(u=!1!==(l.context.$implicit.isSelected=e)&&u),"ionChange"===n&&(u=!1!==i.checkBoxValueChangeHandler()&&u),u}),r.J,r.j)),t.nb(3,16384,null,0,o.c,[t.k],null,null),t.Db(1024,null,p.b,(function(l){return[l]}),[o.c]),t.nb(5,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,p.c,null,[p.e]),t.nb(7,16384,null,0,p.d,[[4,p.c]],null,null),t.nb(8,49152,null,0,o.r,[t.h,t.k,t.x],null,null),(l()(),t.ob(9,0,null,0,21,"ion-row",[["style","width: 100%;"]],null,null,null,r.U,r.u)),t.nb(10,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(11,0,null,0,4,"ion-col",[["size","6"]],null,null,null,r.K,r.k)),t.nb(12,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(13,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(14,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(15,0,["",""])),(l()(),t.ob(16,0,null,0,4,"ion-col",[["size","2"]],null,null,null,r.K,r.k)),t.nb(17,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(18,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(19,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(20,0,["$",""])),(l()(),t.ob(21,0,null,0,4,"ion-col",[["size","2"]],null,null,null,r.K,r.k)),t.nb(22,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(23,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(24,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(25,0,["* ",""])),(l()(),t.ob(26,0,null,0,4,"ion-col",[["size","2"]],null,null,null,r.K,r.k)),t.nb(27,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(28,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(29,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(30,0,["$",""]))],(function(l,n){l(n,5,0,n.context.$implicit.isSelected),l(n,12,0,"6"),l(n,17,0,"2"),l(n,22,0,"2"),l(n,27,0,"2")}),(function(l,n){l(n,2,0,t.Ab(n,7).ngClassUntouched,t.Ab(n,7).ngClassTouched,t.Ab(n,7).ngClassPristine,t.Ab(n,7).ngClassDirty,t.Ab(n,7).ngClassValid,t.Ab(n,7).ngClassInvalid,t.Ab(n,7).ngClassPending),l(n,15,0,n.context.$implicit.itemName),l(n,20,0,n.context.$implicit.unitPrice),l(n,25,0,n.context.$implicit.quantity),l(n,30,0,n.context.$implicit.totalPrice)}))}function w(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,5,"ion-content",[],null,null,null,r.L,r.l)),t.nb(1,49152,null,0,o.u,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,3,"ion-list",[],null,null,null,r.T,r.t)),t.nb(3,49152,null,0,o.O,[t.h,t.k,t.x],null,null),(l()(),t.db(16777216,null,0,1,null,B)),t.nb(5,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.component.displayedBillItemList)}),null)}var P=function(){function l(){var n=this;_classCallCheck(this,l),this.billItemCount=0,this.billPriceBeforeTaxes=0,this.billGst=0,this.billPst=0,this.billLct=0,this.billPriceAfterTaxes=0,this.refresh=function(l){return b.a(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.billItemCount=l.filter((function(l){return l.isSelected})).length,this.billPriceBeforeTaxes=this.calculateBillPriceBeforeTaxes(l),this.billGst=this.calculateBillTax(l,"gst"),this.billPst=this.calculateBillTax(l,"pst"),this.billLct=this.calculateBillTax(l,"lct"),this.billPriceAfterTaxes=this.billPriceBeforeTaxes+this.billGst+this.billPst+this.billLct;case 1:case"end":return n.stop()}}),n,this)})))}}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"calculateBillPriceBeforeTaxes",value:function(l){var n=0;return l.forEach((function(l){n+=l.unitPrice*l.quantity})),n}},{key:"calculateBillTax",value:function(l,n){var e=0;return l.forEach((function(l){e+=l.unitPrice*l.menuItem[n+"Rate"]*l.quantity})),e}}]),l}(),A=t.mb({encapsulation:0,styles:[[""]],data:{}});function S(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,9,"ion-card-header",[],null,null,null,r.F,r.g)),t.nb(1,49152,null,0,o.o,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,7,"ion-card-subtitle",[],null,null,null,r.G,r.h)),t.nb(3,49152,null,0,o.p,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,2,"ion-label",[["color","success"]],null,null,null,r.S,r.s)),t.nb(5,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(6,0,["",""])),(l()(),t.ob(7,0,null,0,2,"ion-label",[["style","margin-left: 1em;"]],null,null,null,r.S,r.s)),t.nb(8,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["items selected"])),(l()(),t.ob(10,0,null,null,47,"ion-card-content",[["style","height: calc(100% - 56px);"]],null,null,null,r.E,r.f)),t.nb(11,49152,null,0,o.n,[t.h,t.k,t.x],null,null),(l()(),t.ob(12,0,null,0,45,"ion-grid",[],null,null,null,r.M,r.m)),t.nb(13,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(14,0,null,0,35,"ion-row",[["style","height: 70%"]],null,null,null,r.U,r.u)),t.nb(15,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(16,0,null,0,7,"ion-col",[["size","8"]],null,null,null,r.K,r.k)),t.nb(17,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(18,0,null,0,2,"ion-label",[["style","margin-right: 1em; font-size: 1.3em;"]],null,null,null,r.S,r.s)),t.nb(19,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["Price:"])),(l()(),t.ob(21,0,null,0,2,"ion-label",[["color","dark"],["style","font-size: 1.6em;"]],null,null,null,r.S,r.s)),t.nb(22,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(23,0,["$",""])),(l()(),t.ob(24,0,null,0,25,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(25,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(26,0,null,0,7,"ion-row",[],null,null,null,r.U,r.u)),t.nb(27,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(28,0,null,0,2,"ion-label",[["style","margin-right: 1em; font-size: 1em;"]],null,null,null,r.S,r.s)),t.nb(29,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["GST:"])),(l()(),t.ob(31,0,null,0,2,"ion-label",[["color","dark"],["style","font-size: 1.2em;"]],null,null,null,r.S,r.s)),t.nb(32,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(33,0,["$",""])),(l()(),t.ob(34,0,null,0,7,"ion-row",[],null,null,null,r.U,r.u)),t.nb(35,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(36,0,null,0,2,"ion-label",[["style","margin-right: 1em; font-size: 1em;"]],null,null,null,r.S,r.s)),t.nb(37,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["PST:"])),(l()(),t.ob(39,0,null,0,2,"ion-label",[["color","dark"],["style","font-size: 1.2em;"]],null,null,null,r.S,r.s)),t.nb(40,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(41,0,["$",""])),(l()(),t.ob(42,0,null,0,7,"ion-row",[],null,null,null,r.U,r.u)),t.nb(43,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(44,0,null,0,2,"ion-label",[["style","margin-right: 1em; font-size: 1em;"]],null,null,null,r.S,r.s)),t.nb(45,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["LCT:"])),(l()(),t.ob(47,0,null,0,2,"ion-label",[["color","dark"],["style","font-size: 1.2em;"]],null,null,null,r.S,r.s)),t.nb(48,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(49,0,["$",""])),(l()(),t.ob(50,0,null,0,7,"ion-row",[["style","height: 30%"]],null,null,null,r.U,r.u)),t.nb(51,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(52,0,null,0,2,"ion-label",[["style","margin-right: 1em; font-size: 1.4em;"]],null,null,null,r.S,r.s)),t.nb(53,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["Balance:"])),(l()(),t.ob(55,0,null,0,2,"ion-label",[["color","danger"],["style","font-size: 1.8em;"]],null,null,null,r.S,r.s)),t.nb(56,49152,null,0,o.N,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.Gb(57,0,["$",""]))],(function(l,n){l(n,5,0,"success"),l(n,17,0,"8"),l(n,22,0,"dark"),l(n,25,0,"4"),l(n,32,0,"dark"),l(n,40,0,"dark"),l(n,48,0,"dark"),l(n,56,0,"danger")}),(function(l,n){var e=n.component;l(n,6,0,e.billItemCount),l(n,23,0,e.billPriceBeforeTaxes.toFixed(2)),l(n,33,0,e.billGst.toFixed(2)),l(n,41,0,e.billPst.toFixed(2)),l(n,49,0,e.billLct.toFixed(2)),l(n,57,0,e.billPriceAfterTaxes.toFixed(2))}))}var R=function(){var l=function l(){_classCallCheck(this,l),this.status=l.Status.Unavailable,this.gstRate=0,this.pstRate=0,this.lctRate=0,this.imageUrl=""};return l.Status={Available:"Available",Unavailable:"Unavailable"},l}(),L=function(){function l(n,e){_classCallCheck(this,l),this.modalController=n,this.navParams=e,this.categoryList=[],this.menuItemList=[],this.displayedMenuItemList=[],this.selectedMenuItemList=[]}return _createClass(l,[{key:"ngOnInit",value:function(){this.selectedTable=this.navParams.get("selectedTable"),this.refreshBillItemsHandler=this.navParams.get("refreshBillItemsHandler")}},{key:"ionViewDidEnter",value:function(){this.fetchMenuItemList(),this.fetchMenuCategoryList()}},{key:"addMenuItem",value:function(l){var n=this.selectedMenuItemList.find((function(n){return n.id===l.id}));n?n.quantity++:this.selectedMenuItemList.push({name:l.name,id:l.id,quantity:1})}},{key:"removeMenuItem",value:function(l){var n=this.selectedMenuItemList.find((function(n){return n===l}));n.quantity>1?n.quantity--:this.selectedMenuItemList.splice(this.selectedMenuItemList.findIndex((function(n){return n===l})),1)}},{key:"confirm",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.selectedTable){l.next=5;break}return l.next=3,this.fetchBill(this.selectedTable.id);case 3:(n=l.sent)&&(this.selectedMenuItemList.forEach((function(l){return b.a(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item/add?billId="+n.id+"&menuItemId="+l.id+"&quantity="+l.quantity+"&groupId=1",{method:"POST"});case 2:case"end":return e.stop()}}),e)})))})),this.dismiss()),this.refreshBillItemsHandler();case 5:case"end":return l.stop()}}),l,this)})))}},{key:"dismiss",value:function(){this.modalController.dismiss(null,null,"menu-item-picker-modal")}},{key:"fetchMenuItemList",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/menu/item?status="+R.Status.Available);case 2:return n=l.sent,l.next=5,n.json();case 5:this.menuItemList=l.sent;case 6:case"end":return l.stop()}}),l,this)})))}},{key:"fetchMenuCategoryList",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/menu/category");case 2:return n=l.sent,l.next=5,n.json();case 5:this.categoryList=l.sent,this.categoryList&&this.categoryList.length>0&&(this.selectedCategory=this.categoryList[0]);case 7:case"end":return l.stop()}}),l,this)})))}},{key:"fetchBill",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill?tableId="+l+"&status="+C.Status.Open);case 2:return e=n.sent,n.next=5,e.json();case 5:return n.abrupt("return",n.sent[0]);case 6:case"end":return n.stop()}}),n)})))}},{key:"selectedCategory",get:function(){return this._selectedCategory},set:function(l){this._selectedCategory=l,this.displayedMenuItemList=this.menuItemList.filter((function(n){return n.categoryId===l.id}))}}]),l}(),U=function(){function l(n,e,t){_classCallCheck(this,l),this.modalController=n,this.navParams=e,this.alertController=t,this.selectedBillItemPrice=0,this.shouldPay=0,this.tipReceive=0,this.cashAlreadyPay=!1,this.cardAlreadyPay=!1,this.mappedBillItems=[]}return _createClass(l,[{key:"ngOnInit",value:function(){this.selectedTable=this.navParams.get("selectedTable"),this.selectedBillItemIds=this.navParams.get("selectedBillItemIds"),this.refreshBillItemsHandler=this.navParams.get("refreshBillItemsHandler"),this.tableListRefreshHandler=this.navParams.get("tableListRefreshHandler")}},{key:"ionViewDidEnter",value:function(){this.fetchBillItem()}},{key:"fetchBillItem",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t,u,i,r;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:n=_createForOfIteratorHelper(this.selectedBillItemIds),l.prev=1,n.s();case 3:if((e=n.n()).done){l.next=18;break}return t=e.value,l.next=7,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item?id="+t+"&hasPaid=False");case 7:return u=l.sent,l.next=10,u.json();case 10:return i=l.sent,console.log(i),l.next=14,this.fetchMenuItem(i[0].menuItemId);case 14:r=l.sent,console.log(r),this.mappedBillItems.push({name:r.name,category:r.categoryId,unitPrice:r.unitPrice,quantity:i[0].quantity,gst:r.gstRate,pst:r.pstRate,lct:r.lctRate});case 16:l.next=3;break;case 18:l.next=23;break;case 20:l.prev=20,l.t0=l.catch(1),n.e(l.t0);case 23:return l.prev=23,n.f(),l.finish(23);case 26:return console.log(this.mappedBillItems),l.next=29,this.calculateSelectedBillItemPrice();case 29:this.selectedBillItemPrice=l.sent,this.shouldPay=this.selectedBillItemPrice;case 31:case"end":return l.stop()}}),l,this,[[1,20,23,26]])})))}},{key:"fetchMenuItem",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/menu/item?id="+l);case 2:return e=n.sent,n.next=5,e.json();case 5:return n.abrupt("return",n.sent[0]);case 6:case"end":return n.stop()}}),n)})))}},{key:"calculateSelectedBillItemPrice",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=0,l.abrupt("return",(this.mappedBillItems.forEach((function(l){n+=l.unitPrice*l.quantity+l.unitPrice*l.quantity*l.gst+l.unitPrice*l.quantity*l.pst+l.unitPrice*l.quantity*l.lct})),n));case 2:case"end":return l.stop()}}),l,this)})))}},{key:"fetchBill",value:function(l){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill?tableId="+l+"&status=Open");case 2:return e=n.sent,n.next=5,e.json();case 5:return n.abrupt("return",n.sent[0]);case 6:case"end":return n.stop()}}),n)})))}},{key:"confirmPayment",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t,u;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.selectedTable){l.next=16;break}return l.next=3,this.fetchBill(this.selectedTable.id);case 3:if(!(n=l.sent)){l.next=16;break}return l.next=7,fetch(localStorage.getItem("serverApiBaseUrl")+"/payment/pay?billId="+n.id+"&cashPayAmount="+this.cashPay+"&cardPayAmount="+this.cardPay+"&changeGiven="+this.changeGiven,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.selectedBillItemIds)});case 7:return e=l.sent,this.refreshBillItemsHandler(),l.next=11,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item?billId="+n.id+"&hasPaid=false");case 11:return t=l.sent,l.next=14,t.json();case 14:u=l.sent,e&&0==Object.keys(u).length&&this.closeTableAlertConfirm(),this.dismiss();case 16:case"end":return l.stop()}}),l,this)})))}},{key:"closeTableAlertConfirm",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.alertController.create({header:"All items are paid.",message:"<strong>Close this table?<strong>",buttons:[{text:"NOT YET",role:"cancel",cssClass:"secondary"},{text:"YES",handler:function(){return b.a(e,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/table/close?id="+this.selectedTable.id,{method:"PUT"});case 2:this.tableListRefreshHandler();case 3:case"end":return l.stop()}}),l,this)})))}}]});case 2:return n=l.sent,l.next=5,n.present();case 5:case"end":return l.stop()}}),l,this)})))}},{key:"dismiss",value:function(){this.modalController.dismiss(null,null,"payment-modal")}},{key:"cashPay",get:function(){return this._cashPay},set:function(l){l>0&&(this.cashAlreadyPay=!0,this._cashPay=l,this.shouldPay=this.cardAlreadyPay?this.selectedBillItemPrice-this.cashPay-this.cardPay:this.selectedBillItemPrice-this.cashPay,this.changeGiven=-this.shouldPay)}},{key:"cardPay",get:function(){return this._cardPay},set:function(l){l>0&&(this.cardAlreadyPay=!0,this._cardPay=l,this.shouldPay=this.cashAlreadyPay?this.selectedBillItemPrice-this.cardPay-this.cashPay:this.selectedBillItemPrice-this.cardPay,this.tipReceive=-this.shouldPay)}},{key:"changeGiven",get:function(){return this._changeGiven},set:function(l){this._changeGiven=l,this.tipReceive=-(+this.changeGiven+this.shouldPay)}}]),l}(),_=function(){function l(n,e){_classCallCheck(this,l),this.modalController=n,this.alertController=e}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"selectAll",value:function(){this.displayedBillItemList.forEach((function(l){return l.isSelected=!0}))}},{key:"clearAll",value:function(){this.displayedBillItemList.forEach((function(l){return l.isSelected=!1}))}},{key:"addItem",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.modalController.create({component:L,cssClass:"large-modal",id:"menu-item-picker-modal",componentProps:{selectedTable:this.selectedTable,refreshBillItemsHandler:this.refreshBillItemsHandler}});case 2:return n=l.sent,l.next=5,n.present();case 5:case"end":return l.stop()}}),l,this)})))}},{key:"deleteItems",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=this.displayedBillItemList.filter((function(l){return l.isSelected})),l.next=3,this.alertController.create({header:"Delete Items",message:"Are you sure to delete "+n.length+" selected item(s)?",buttons:["Cancel",{text:"Confirm",handler:function(){n.forEach((function(l){return b.a(t,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item?id="+l.billItem.id,{method:"DELETE"});case 2:case"end":return n.stop()}}),n)})))})),t.refreshBillItemsHandler()}}]});case 3:return e=l.sent,l.next=6,e.present();case 6:case"end":return l.stop()}}),l,this)})))}},{key:"combine",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=this.displayedBillItemList.filter((function(l){return l.isSelected})).map((function(l){return l.billItem.id})),l.next=3,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item/combine",{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 3:this.refreshBillItemsHandler();case 4:case"end":return l.stop()}}),l,this)})))}},{key:"split",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,t=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=this.displayedBillItemList.filter((function(l){return l.isSelected})).map((function(l){return l.billItem.id})),l.next=3,this.alertController.create({header:"Split items into",inputs:[{name:"quantity",type:"number",placeholder:"Enter a number to split."}],buttons:["Cancel",{text:"Confirm",handler:function(l){return b.a(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.quantity,e.t0=t,!e.t0){e.next=6;break}return e.next=5,fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/item/split?quantity="+t,{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 5:this.refreshBillItemsHandler();case 6:case"end":return e.stop()}}),e,this)})))}}]});case 3:return e=l.sent,l.next=6,e.present();case 6:case"end":return l.stop()}}),l,this)})))}},{key:"pay",value:function(){return b.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=this.displayedBillItemList.filter((function(l){return l.isSelected})).map((function(l){return l.billItem.id})),l.next=3,this.modalController.create({component:U,cssClass:"large-modal",id:"payment-modal",componentProps:{selectedBillItemIds:n,selectedTable:this.selectedTable,refreshBillItemsHandler:this.refreshBillItemsHandler,tableListRefreshHandler:this.tableListRefreshHandler}});case 3:return e=l.sent,l.next=6,e.present();case 6:case"end":return l.stop()}}),l,this)})))}},{key:"isSelectedTableUsing",get:function(){return this.selectedTable&&this.selectedTable.status===h.Status.Using}},{key:"isSelectedDisplayedBillItemListEmpty",get:function(){var l=this.displayedBillItemList.filter((function(l){return l.isSelected}));return!l||l.length<=0}}]),l}(),z=t.mb({encapsulation:0,styles:[["ion-grid[_ngcontent-%COMP%]{height:100%}ion-row[_ngcontent-%COMP%]{height:16.67%}"]],data:{}});function G(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,68,"ion-grid",[],null,null,null,r.M,r.m)),t.nb(1,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,11,"ion-row",[],null,null,null,r.U,r.u)),t.nb(3,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(5,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(6,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.selectAll()&&t),t}),r.C,r.c)),t.nb(7,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Select All "])),(l()(),t.ob(9,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(10,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(11,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.clearAll()&&t),t}),r.C,r.c)),t.nb(12,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Clear All "])),(l()(),t.ob(14,0,null,0,11,"ion-row",[],null,null,null,r.U,r.u)),t.nb(15,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(16,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(17,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(18,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.addItem()&&t),t}),r.C,r.c)),t.nb(19,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Add Item "])),(l()(),t.ob(21,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(22,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(23,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.deleteItems()&&t),t}),r.C,r.c)),t.nb(24,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Delete Items "])),(l()(),t.ob(26,0,null,0,11,"ion-row",[],null,null,null,r.U,r.u)),t.nb(27,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(28,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(29,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(30,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.combine()&&t),t}),r.C,r.c)),t.nb(31,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Combine "])),(l()(),t.ob(33,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(34,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(35,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.split()&&t),t}),r.C,r.c)),t.nb(36,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Split"])),(l()(),t.ob(38,0,null,0,9,"ion-row",[],null,null,null,r.U,r.u)),t.nb(39,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(40,0,null,0,3,"ion-col",[],null,null,null,r.K,r.k)),t.nb(41,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(42,0,null,0,1,"ion-button",[["class","large-button"],["color","medium"]],null,null,null,r.C,r.c)),t.nb(43,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.ob(44,0,null,0,3,"ion-col",[],null,null,null,r.K,r.k)),t.nb(45,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(46,0,null,0,1,"ion-button",[["class","large-button"],["color","medium"]],null,null,null,r.C,r.c)),t.nb(47,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.ob(48,0,null,0,9,"ion-row",[],null,null,null,r.U,r.u)),t.nb(49,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(50,0,null,0,3,"ion-col",[],null,null,null,r.K,r.k)),t.nb(51,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(52,0,null,0,1,"ion-button",[["class","large-button"],["color","medium"]],null,null,null,r.C,r.c)),t.nb(53,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.ob(54,0,null,0,3,"ion-col",[],null,null,null,r.K,r.k)),t.nb(55,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(56,0,null,0,1,"ion-button",[["class","large-button"],["color","medium"]],null,null,null,r.C,r.c)),t.nb(57,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.ob(58,0,null,0,10,"ion-row",[],null,null,null,r.U,r.u)),t.nb(59,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(60,0,null,0,3,"ion-col",[],null,null,null,r.K,r.k)),t.nb(61,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(62,0,null,0,1,"ion-button",[["class","large-button"],["color","medium"]],null,null,null,r.C,r.c)),t.nb(63,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.ob(64,0,null,0,4,"ion-col",[],null,null,null,r.K,r.k)),t.nb(65,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(66,0,null,0,2,"ion-button",[["class","large-button"],["color","medium"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.pay()&&t),t}),r.C,r.c)),t.nb(67,49152,null,0,o.k,[t.h,t.k,t.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Gb(-1,0,["Pay"]))],(function(l,n){var e=n.component;l(n,7,0,"medium",!e.isSelectedTableUsing),l(n,12,0,"medium",!e.isSelectedTableUsing||e.isSelectedDisplayedBillItemListEmpty),l(n,19,0,"medium",!e.isSelectedTableUsing),l(n,24,0,"medium",!e.isSelectedTableUsing||e.isSelectedDisplayedBillItemListEmpty),l(n,31,0,"medium",!e.isSelectedTableUsing||e.isSelectedDisplayedBillItemListEmpty),l(n,36,0,"medium",!e.isSelectedTableUsing||e.isSelectedDisplayedBillItemListEmpty),l(n,43,0,"medium",!0),l(n,47,0,"medium",!0),l(n,53,0,"medium",!0),l(n,57,0,"medium",!0),l(n,63,0,"medium",!0),l(n,67,0,"medium",!e.isSelectedTableUsing||e.isSelectedDisplayedBillItemListEmpty)}),null)}var M=function(){function l(n){_classCallCheck(this,l),this.navControlor=n}return _createClass(l,[{key:"goToSettingsPage",value:function(){this.navControlor.navigateForward("/settings")}}]),l}(),O=t.mb({encapsulation:0,styles:[["ion-card[_ngcontent-%COMP%]{height:100%;margin:0}"]],data:{}});function H(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,12,"ion-header",[],null,null,null,r.N,r.n)),t.nb(1,49152,null,0,o.B,[t.h,t.k,t.x],{translucent:[0,"translucent"]},null),(l()(),t.ob(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.Z,r.z)),t.nb(3,49152,null,0,o.zb,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,2,"ion-title",[],null,null,null,r.Y,r.y)),t.nb(5,49152,null,0,o.xb,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,[" Cashier "])),(l()(),t.ob(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.d)),t.nb(8,49152,null,0,o.l,[t.h,t.k,t.x],null,null),(l()(),t.ob(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.goToSettingsPage()&&t),t}),r.C,r.c)),t.nb(10,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(l()(),t.ob(11,0,null,0,1,"ion-icon",[["name","settings"],["slot","icon-only"]],null,null,null,r.O,r.o)),t.nb(12,49152,null,0,o.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.ob(13,0,null,null,47,"ion-content",[["no-padding",""]],null,null,null,r.L,r.l)),t.nb(14,49152,null,0,o.u,[t.h,t.k,t.x],{fullscreen:[0,"fullscreen"]},null),(l()(),t.ob(15,0,null,0,45,"ion-grid",[["style","height: 100%;"]],null,null,null,r.M,r.m)),t.nb(16,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(17,0,null,0,43,"ion-row",[["style","height: 100%;"]],null,null,null,r.U,r.u)),t.nb(18,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(19,0,null,0,17,"ion-col",[["size","4"],["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(20,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(21,0,null,0,7,"ion-row",[["style","height: 70%;"]],null,null,null,r.U,r.u)),t.nb(22,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(23,0,null,0,5,"ion-col",[["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(24,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(25,0,null,0,3,"ion-card",[],null,null,null,r.I,r.e)),t.nb(26,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(27,0,null,0,1,"app-table-list",[],null,[[null,"selectedTableChange"]],(function(l,n,e){var t=!0;return"selectedTableChange"===n&&(t=!1!==(l.component.selectedTable=e)&&t),t}),g,m)),t.nb(28,114688,[["tableListComponenet",4]],0,d,[],{selectedTable:[0,"selectedTable"]},{selectedTableChange:"selectedTableChange"}),(l()(),t.ob(29,0,null,0,7,"ion-row",[["style","height: 30%;"]],null,null,null,r.U,r.u)),t.nb(30,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(31,0,null,0,5,"ion-col",[["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(32,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(33,0,null,0,3,"ion-card",[],null,null,null,r.I,r.e)),t.nb(34,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(35,0,null,0,1,"app-table-detail",[],null,null,null,x,v)),t.nb(36,114688,null,0,k,[o.a],{selectedTable:[0,"selectedTable"],tableListRefreshHandler:[1,"tableListRefreshHandler"]},null),(l()(),t.ob(37,0,null,0,17,"ion-col",[["size","5"],["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(38,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(39,0,null,0,7,"ion-row",[["style","height: 70%;"]],null,null,null,r.U,r.u)),t.nb(40,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(41,0,null,0,5,"ion-col",[["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(42,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(43,0,null,0,3,"ion-card",[],null,null,null,r.I,r.e)),t.nb(44,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(45,0,null,0,1,"app-bill-item-list",[],null,null,null,w,T)),t.nb(46,114688,[["billItemListComponent",4]],0,I,[],{refreshBillSummaryHandler:[0,"refreshBillSummaryHandler"],selectedTable:[1,"selectedTable"]},null),(l()(),t.ob(47,0,null,0,7,"ion-row",[["style","height: 30%;"]],null,null,null,r.U,r.u)),t.nb(48,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(49,0,null,0,5,"ion-col",[["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(50,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(51,0,null,0,3,"ion-card",[],null,null,null,r.I,r.e)),t.nb(52,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(53,0,null,0,1,"app-bill-summary",[],null,null,null,S,A)),t.nb(54,114688,[["billSummaryComponent",4]],0,P,[],null,null),(l()(),t.ob(55,0,null,0,5,"ion-col",[["size","3"],["style","height: 100%;"]],null,null,null,r.K,r.k)),t.nb(56,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(57,0,null,0,3,"ion-card",[],null,null,null,r.I,r.e)),t.nb(58,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(59,0,null,0,1,"app-operation-buttons",[],null,null,null,G,z)),t.nb(60,114688,null,0,_,[o.Db,o.a],{selectedTable:[0,"selectedTable"],displayedBillItemList:[1,"displayedBillItemList"],refreshBillItemsHandler:[2,"refreshBillItemsHandler"],tableListRefreshHandler:[3,"tableListRefreshHandler"]},null)],(function(l,n){var e=n.component;l(n,1,0,!0),l(n,12,0,"settings"),l(n,14,0,!0),l(n,20,0,"4"),l(n,28,0,e.selectedTable),l(n,36,0,e.selectedTable,t.Ab(n,28).fetchTableList),l(n,38,0,"5"),l(n,46,0,t.Ab(n,54).refresh,e.selectedTable),l(n,54,0),l(n,56,0,"3"),l(n,60,0,e.selectedTable,t.Ab(n,46).displayedBillItemList,t.Ab(n,46).refreshBillItems,t.Ab(n,28).fetchTableList)}),null)}var D=t.kb("app-home",M,(function(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,1,"app-home",[],null,null,null,H,O)),t.nb(1,49152,null,0,M,[o.Eb],null,null)],null,null)}),{},{},[]),K=t.mb({encapsulation:0,styles:[["#page-wrap[_ngcontent-%COMP%]{--overflow:hidden}ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}#selected-item-container-card[_ngcontent-%COMP%]{height:calc(100% - 40px);margin:0}ion-list[_ngcontent-%COMP%]{min-height:100%}#menu-item-box[_ngcontent-%COMP%]{height:100px;width:100px;max-width:100px}#menu-item-box[_ngcontent-%COMP%] > ion-card[_ngcontent-%COMP%]{width:100%;height:100%;color:#000;--background:grey}#menu-item-box[_ngcontent-%COMP%] > ion-card[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;background-color:grey}"]],data:{}});function F(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,10,"ion-item",[],null,null,null,r.R,r.r)),t.nb(1,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.d)),t.nb(3,49152,null,0,o.l,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.removeMenuItem(l.context.$implicit)&&t),t}),r.C,r.c)),t.nb(5,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(l()(),t.ob(6,0,null,0,1,"ion-icon",[["name","remove"],["slot","icon-only"]],null,null,null,r.O,r.o)),t.nb(7,49152,null,0,o.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.ob(8,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(9,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(10,0,[""," * ",""]))],(function(l,n){l(n,7,0,"remove")}),(function(l,n){l(n,10,0,n.context.$implicit.name,n.context.$implicit.quantity)}))}function E(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,2,"ion-segment-button",[],null,null,null,r.V,r.w)),t.nb(1,49152,null,0,o.jb,[t.h,t.k,t.x],{value:[0,"value"]},null),(l()(),t.Gb(2,0,[""," "]))],(function(l,n){l(n,1,0,n.context.$implicit)}),(function(l,n){l(n,2,0,n.context.$implicit.name)}))}function N(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,8,"ion-col",[["id","menu-item-box"]],null,null,null,r.K,r.k)),t.nb(1,49152,null,0,o.t,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,6,"ion-card",[["button",""]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.addMenuItem(l.context.$implicit)&&t),t}),r.I,r.e)),t.nb(3,49152,null,0,o.m,[t.h,t.k,t.x],{button:[0,"button"]},null),(l()(),t.ob(4,0,null,0,1,"ion-img",[],null,[[null,"ionError"]],(function(l,n,e){var u=!0;return"ionError"===n&&(u=!1!==(t.Ab(l,5).src="https://unpkg.com/ionicons@5.0.0/dist/svg/restaurant-outline.svg")&&u),u}),r.P,r.p)),t.nb(5,49152,[["menuItemImageElement",4]],0,o.D,[t.h,t.k,t.x],{src:[0,"src"]},null),(l()(),t.ob(6,0,null,0,2,"ion-label",[],null,null,null,r.S,r.s)),t.nb(7,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(8,0,["",""]))],(function(l,n){l(n,3,0,""),l(n,5,0,n.context.$implicit.imageUrl)}),(function(l,n){l(n,8,0,n.context.$implicit.name)}))}function $(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,12,"ion-header",[],null,null,null,r.N,r.n)),t.nb(1,49152,null,0,o.B,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.Z,r.z)),t.nb(3,49152,null,0,o.zb,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,2,"ion-title",[],null,null,null,r.Y,r.y)),t.nb(5,49152,null,0,o.xb,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,[" Add Items "])),(l()(),t.ob(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.d)),t.nb(8,49152,null,0,o.l,[t.h,t.k,t.x],null,null),(l()(),t.ob(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.dismiss()&&t),t}),r.C,r.c)),t.nb(10,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(l()(),t.ob(11,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,r.O,r.o)),t.nb(12,49152,null,0,o.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.ob(13,0,null,null,37,"ion-content",[["id","page-wrap"]],null,null,null,r.L,r.l)),t.nb(14,49152,null,0,o.u,[t.h,t.k,t.x],null,null),(l()(),t.ob(15,0,null,0,35,"ion-grid",[],null,null,null,r.M,r.m)),t.nb(16,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(17,0,null,0,33,"ion-row",[],null,null,null,r.U,r.u)),t.nb(18,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(19,0,null,0,12,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(20,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(21,0,null,0,7,"ion-card",[["id","selected-item-container-card"]],null,null,null,r.I,r.e)),t.nb(22,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.ob(23,0,null,0,5,"ion-content",[],null,null,null,r.L,r.l)),t.nb(24,49152,null,0,o.u,[t.h,t.k,t.x],null,null),(l()(),t.ob(25,0,null,0,3,"ion-list",[],null,null,null,r.T,r.t)),t.nb(26,49152,null,0,o.O,[t.h,t.k,t.x],null,null),(l()(),t.db(16777216,null,0,1,null,F)),t.nb(28,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ob(29,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.confirm()&&t),t}),r.C,r.c)),t.nb(30,49152,null,0,o.k,[t.h,t.k,t.x],{expand:[0,"expand"]},null),(l()(),t.Gb(-1,0,["Confirm"])),(l()(),t.ob(32,0,null,0,18,"ion-col",[["size","8"]],null,null,null,r.K,r.k)),t.nb(33,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(34,0,null,0,8,"ion-segment",[["scrollable",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Ab(l,35)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,35)._handleChangeEvent(e.target)&&u),"ngModelChange"===n&&(u=!1!==(i.selectedCategory=e)&&u),u}),r.W,r.v)),t.nb(35,16384,null,0,o.Jb,[t.k],null,null),t.Db(1024,null,p.b,(function(l){return[l]}),[o.Jb]),t.nb(37,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,p.c,null,[p.e]),t.nb(39,16384,null,0,p.d,[[4,p.c]],null,null),t.nb(40,49152,null,0,o.ib,[t.h,t.k,t.x],{scrollable:[0,"scrollable"]},null),(l()(),t.db(16777216,null,0,1,null,E)),t.nb(42,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ob(43,0,null,0,7,"ion-content",[],null,null,null,r.L,r.l)),t.nb(44,49152,null,0,o.u,[t.h,t.k,t.x],null,null),(l()(),t.ob(45,0,null,0,5,"ion-grid",[],null,null,null,r.M,r.m)),t.nb(46,49152,null,0,o.A,[t.h,t.k,t.x],null,null),(l()(),t.ob(47,0,null,0,3,"ion-row",[],null,null,null,r.U,r.u)),t.nb(48,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.db(16777216,null,0,1,null,N)),t.nb(50,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,12,0,"close"),l(n,20,0,"4"),l(n,28,0,e.selectedMenuItemList),l(n,30,0,"block"),l(n,33,0,"8"),l(n,37,0,e.selectedCategory),l(n,40,0,""),l(n,42,0,e.categoryList),l(n,50,0,e.displayedMenuItemList)}),(function(l,n){l(n,34,0,t.Ab(n,39).ngClassUntouched,t.Ab(n,39).ngClassTouched,t.Ab(n,39).ngClassPristine,t.Ab(n,39).ngClassDirty,t.Ab(n,39).ngClassValid,t.Ab(n,39).ngClassInvalid,t.Ab(n,39).ngClassPending)}))}var q=t.kb("app-menu-item-picker",L,(function(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,1,"app-menu-item-picker",[],null,null,null,$,K)),t.nb(1,114688,null,0,L,[o.Db,o.Fb],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),j=t.mb({encapsulation:0,styles:[[""]],data:{}});function V(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,4,"ion-item",[["class","menu-item-box"],["style","width: 100%"]],null,null,null,r.R,r.r)),t.nb(1,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,r.S,r.s)),t.nb(3,49152,null,0,o.N,[t.h,t.k,t.x],null,null),(l()(),t.Gb(4,0,[""," *",""]))],null,(function(l,n){l(n,4,0,n.context.$implicit.name,n.context.$implicit.quantity)}))}function J(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,12,"ion-header",[],null,null,null,r.N,r.n)),t.nb(1,49152,null,0,o.B,[t.h,t.k,t.x],null,null),(l()(),t.ob(2,0,null,0,10,"ion-toolbar",[],null,null,null,r.Z,r.z)),t.nb(3,49152,null,0,o.zb,[t.h,t.k,t.x],null,null),(l()(),t.ob(4,0,null,0,2,"ion-title",[],null,null,null,r.Y,r.y)),t.nb(5,49152,null,0,o.xb,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,[" Payment "])),(l()(),t.ob(7,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.d)),t.nb(8,49152,null,0,o.l,[t.h,t.k,t.x],null,null),(l()(),t.ob(9,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.dismiss()&&t),t}),r.C,r.c)),t.nb(10,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(l()(),t.ob(11,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,r.O,r.o)),t.nb(12,49152,null,0,o.C,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.ob(13,0,null,null,74,"ion-content",[["id","page-wrap"]],null,null,null,r.L,r.l)),t.nb(14,49152,null,0,o.u,[t.h,t.k,t.x],null,null),(l()(),t.ob(15,0,null,0,72,"ion-row",[["style","height: 100%"]],null,null,null,r.U,r.u)),t.nb(16,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(17,0,null,0,3,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(18,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.db(16777216,null,0,1,null,V)),t.nb(20,278528,null,0,c.h,[t.L,t.I,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ob(21,0,null,0,66,"ion-col",[["size","8"]],null,null,null,r.K,r.k)),t.nb(22,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(23,0,null,0,8,"ion-item",[],null,null,null,r.R,r.r)),t.nb(24,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(25,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.S,r.s)),t.nb(26,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Total price: "])),(l()(),t.ob(28,0,null,0,3,"ion-textarea",[["readonly",""]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0;return"ionBlur"===n&&(u=!1!==t.Ab(l,31)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,31)._handleInputEvent(e.target)&&u),u}),r.X,r.x)),t.Db(5120,null,p.b,(function(l){return[l]}),[o.Kb]),t.nb(30,49152,null,0,o.vb,[t.h,t.k,t.x],{readonly:[0,"readonly"],value:[1,"value"]},null),t.nb(31,16384,null,0,o.Kb,[t.k],null,null),(l()(),t.ob(32,0,null,0,52,"ion-row",[],null,null,null,r.U,r.u)),t.nb(33,49152,null,0,o.gb,[t.h,t.k,t.x],null,null),(l()(),t.ob(34,0,null,0,13,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(35,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(36,0,null,0,11,"ion-item",[],null,null,null,r.R,r.r)),t.nb(37,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(38,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.S,r.s)),t.nb(39,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Cash pay: "])),(l()(),t.ob(41,0,null,0,6,"ion-textarea",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Ab(l,42)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,42)._handleInputEvent(e.target)&&u),"ngModelChange"===n&&(u=!1!==(i.cashPay=e)&&u),u}),r.X,r.x)),t.nb(42,16384,null,0,o.Kb,[t.k],null,null),t.Db(1024,null,p.b,(function(l){return[l]}),[o.Kb]),t.nb(44,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,p.c,null,[p.e]),t.nb(46,16384,null,0,p.d,[[4,p.c]],null,null),t.nb(47,49152,null,0,o.vb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"]},null),(l()(),t.ob(48,0,null,0,13,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(49,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(50,0,null,0,11,"ion-item",[],null,null,null,r.R,r.r)),t.nb(51,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(52,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.S,r.s)),t.nb(53,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Card pay: "])),(l()(),t.ob(55,0,null,0,6,"ion-textarea",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Ab(l,56)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,56)._handleInputEvent(e.target)&&u),"ngModelChange"===n&&(u=!1!==(i.cardPay=e)&&u),u}),r.X,r.x)),t.nb(56,16384,null,0,o.Kb,[t.k],null,null),t.Db(1024,null,p.b,(function(l){return[l]}),[o.Kb]),t.nb(58,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,p.c,null,[p.e]),t.nb(60,16384,null,0,p.d,[[4,p.c]],null,null),t.nb(61,49152,null,0,o.vb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"]},null),(l()(),t.ob(62,0,null,0,22,"ion-col",[["size","4"]],null,null,null,r.K,r.k)),t.nb(63,49152,null,0,o.t,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.ob(64,0,null,0,11,"ion-item",[],null,null,null,r.R,r.r)),t.nb(65,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(66,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.S,r.s)),t.nb(67,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Give change: "])),(l()(),t.ob(69,0,null,0,6,"ion-textarea",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Ab(l,70)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,70)._handleInputEvent(e.target)&&u),"ngModelChange"===n&&(u=!1!==(i.changeGiven=e)&&u),u}),r.X,r.x)),t.nb(70,16384,null,0,o.Kb,[t.k],null,null),t.Db(1024,null,p.b,(function(l){return[l]}),[o.Kb]),t.nb(72,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,p.c,null,[p.e]),t.nb(74,16384,null,0,p.d,[[4,p.c]],null,null),t.nb(75,49152,null,0,o.vb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"]},null),(l()(),t.ob(76,0,null,0,8,"ion-item",[],null,null,null,r.R,r.r)),t.nb(77,49152,null,0,o.H,[t.h,t.k,t.x],null,null),(l()(),t.ob(78,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.S,r.s)),t.nb(79,49152,null,0,o.N,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Gb(-1,0,["Tip receive: "])),(l()(),t.ob(81,0,null,0,3,"ion-textarea",[["readonly",""]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var u=!0;return"ionBlur"===n&&(u=!1!==t.Ab(l,84)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Ab(l,84)._handleInputEvent(e.target)&&u),u}),r.X,r.x)),t.Db(5120,null,p.b,(function(l){return[l]}),[o.Kb]),t.nb(83,49152,null,0,o.vb,[t.h,t.k,t.x],{placeholder:[0,"placeholder"],readonly:[1,"readonly"]},null),t.nb(84,16384,null,0,o.Kb,[t.k],null,null),(l()(),t.ob(85,0,null,0,2,"ion-button",[["id","confirm"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.confirmPayment()&&t),t}),r.C,r.c)),t.nb(86,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(l()(),t.Gb(-1,0,["Confirm"]))],(function(l,n){var e=n.component;l(n,12,0,"close"),l(n,18,0,"4"),l(n,20,0,e.mappedBillItems),l(n,22,0,"8"),l(n,26,0,"floating"),l(n,30,0,"",t.sb(1,"$",e.selectedBillItemPrice.toFixed(2),"")),l(n,35,0,"4"),l(n,39,0,"floating"),l(n,44,0,e.cashPay),l(n,47,0,t.sb(1,"$",e.cashPay,"")),l(n,49,0,"4"),l(n,53,0,"floating"),l(n,58,0,e.cardPay),l(n,61,0,t.sb(1,"$",e.cardPay,"")),l(n,63,0,"4"),l(n,67,0,"floating"),l(n,72,0,e.changeGiven),l(n,75,0,t.sb(1,"$",e.changeGiven,"")),l(n,79,0,"floating"),l(n,83,0,t.sb(1,"$",e.tipReceive.toFixed(2),""),"")}),(function(l,n){l(n,41,0,t.Ab(n,46).ngClassUntouched,t.Ab(n,46).ngClassTouched,t.Ab(n,46).ngClassPristine,t.Ab(n,46).ngClassDirty,t.Ab(n,46).ngClassValid,t.Ab(n,46).ngClassInvalid,t.Ab(n,46).ngClassPending),l(n,55,0,t.Ab(n,60).ngClassUntouched,t.Ab(n,60).ngClassTouched,t.Ab(n,60).ngClassPristine,t.Ab(n,60).ngClassDirty,t.Ab(n,60).ngClassValid,t.Ab(n,60).ngClassInvalid,t.Ab(n,60).ngClassPending),l(n,69,0,t.Ab(n,74).ngClassUntouched,t.Ab(n,74).ngClassTouched,t.Ab(n,74).ngClassPristine,t.Ab(n,74).ngClassDirty,t.Ab(n,74).ngClassValid,t.Ab(n,74).ngClassInvalid,t.Ab(n,74).ngClassPending)}))}var Y=t.kb("app-payment",U,(function(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,1,"app-payment",[],null,null,null,J,j)),t.nb(1,114688,null,0,U,[o.Db,o.Fb,o.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),X=e("iInd");e.d(n,"HomePageModuleNgFactory",(function(){return Z}));var Z=t.lb(u,[],(function(l){return t.xb([t.yb(512,t.j,t.W,[[8,[i.a,D,q,Y]],[3,t.j],t.v]),t.yb(4608,c.j,c.i,[t.s,[2,c.q]]),t.yb(4608,p.g,p.g,[]),t.yb(4608,o.b,o.b,[t.x,t.g]),t.yb(4608,o.Db,o.Db,[o.b,t.j,t.p]),t.yb(4608,o.Ib,o.Ib,[o.b,t.j,t.p]),t.yb(1073742336,c.b,c.b,[]),t.yb(1073742336,p.f,p.f,[]),t.yb(1073742336,p.a,p.a,[]),t.yb(1073742336,o.Bb,o.Bb,[]),t.yb(1073742336,X.n,X.n,[[2,X.s],[2,X.m]]),t.yb(1073742336,u,u,[]),t.yb(1024,X.k,(function(){return[[{path:"",component:M}]]}),[])])}))}}]);